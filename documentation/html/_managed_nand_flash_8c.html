<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SAM3S Software Package: S:/projets/EK/SAM3S-EK/sam3s_project_trunk/libraries/memories/nandflash/ManagedNandFlash.c File Reference</title>
<link href="common/style.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
    <div id="body">
        <div id="title">SAM3S Software Package 2.1</div>
        <div id="banner"></div>

<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_bcc78437aa20a9e08ae4ab86f04766f4.html">libraries</a>      </li>
      <li><a class="el" href="dir_9d11e3e6f6141c04ec0c0a3a1b06ca89.html">memories</a>      </li>
      <li><a class="el" href="dir_63d647a4383b87f7a55887366c6ee428.html">nandflash</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>ManagedNandFlash.c File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &quot;<a class="el" href="memories_8h_source.html">memories.h</a>&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>

<p><a href="_managed_nand_flash_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#ac9178e99979ce912b28db1abe8492115">ECC</a>(managed)&nbsp;&nbsp;&nbsp;((struct <a class="el" href="struct_ecc_nand_flash.html">EccNandFlash</a> *) managed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0b166b6ba51df8f551ed36d72288243"></a><!-- doxytag: member="ManagedNandFlash.c::RAW" ref="ae0b166b6ba51df8f551ed36d72288243" args="(managed)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>RAW</b>(managed)&nbsp;&nbsp;&nbsp;((struct <a class="el" href="struct_raw_nand_flash.html">RawNandFlash</a> *) managed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c629fb93cf2daa7a77a7de6cf558159"></a><!-- doxytag: member="ManagedNandFlash.c::MODEL" ref="a6c629fb93cf2daa7a77a7de6cf558159" args="(managed)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MODEL</b>(managed)&nbsp;&nbsp;&nbsp;((struct <a class="el" href="struct_nand_flash_model.html">NandFlashModel</a> *) managed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a9eadfc474fbb06e749b599eb1aaaa4ee">BADBLOCK</a>&nbsp;&nbsp;&nbsp;255</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3a88b2b65d36f371245655fec40e4615"></a><!-- doxytag: member="ManagedNandFlash.c::GOODBLOCK" ref="a3a88b2b65d36f371245655fec40e4615" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>GOODBLOCK</b>&nbsp;&nbsp;&nbsp;254</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#ad9fc28b5576e0c8e711d9bb80ac458f9">ManagedNandFlash_Initialize</a> (struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, const struct <a class="el" href="struct_nand_flash_model.html">NandFlashModel</a> *model, uint32_t commandAddress, uint32_t addressAddress, uint32_t dataAddress, const <a class="el" href="struct_pin.html">Pin</a> pinChipEnable, const <a class="el" href="struct_pin.html">Pin</a> pinReadyBusy, uint16_t baseBlock, uint16_t sizeInBlocks)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. Scans the device to retrieve or create block status information.  <a href="#ad9fc28b5576e0c8e711d9bb80ac458f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a462f5a21730474d9a8cc629c314bb912">ManagedNandFlash_AllocateBlock</a> (struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t block)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocates a FREE block of a managed nandflash and marks it as LIVE. create block status information.  <a href="#a462f5a21730474d9a8cc629c314bb912"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a1963a284225e8cd3f28391ff78088699">ManagedNandFlash_ReleaseBlock</a> (struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t block)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Releases a LIVE block of a nandflash and marks it as DIRTY. create block status information.  <a href="#a1963a284225e8cd3f28391ff78088699"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a6d34d82d99b87d12772e8f8ea6af1a99">ManagedNandFlash_EraseBlock</a> (struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t block)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erases a DIRTY block of a managed NandFlash. create block status information.  <a href="#a6d34d82d99b87d12772e8f8ea6af1a99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a9c96d47e969fa9027023a695926ddb37">ManagedNandFlash_ReadPage</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t block, uint16_t page, void *<a class="el" href="filesystem_2fatfs__nandflash_2main_8c.html#a335622dac66619cb6b7e24da56046b05">data</a>, void *spare)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the data and/or the spare area of a page on a managed nandflash. If the data pointer is not 0, then the block MUST be LIVE.  <a href="#a9c96d47e969fa9027023a695926ddb37"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#aa5473e4d5b3988ecb4b9b59394d77b5c">ManagedNandFlash_WritePage</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t block, uint16_t page, void *<a class="el" href="filesystem_2fatfs__nandflash_2main_8c.html#a335622dac66619cb6b7e24da56046b05">data</a>, void *spare)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes the data and/or spare area of a LIVE page on a managed NandFlash. ECC for the data area and storing it in the spare. If no data buffer is provided, the ECC is read from the existing page spare. If no spare buffer is provided, the spare area is still written with the ECC information calculated on the data buffer.  <a href="#aa5473e4d5b3988ecb4b9b59394d77b5c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#aee9f19d2e0438e51d424d8aadc6f9d3c">ManagedNandFlash_CopyPage</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t sourceBlock, uint16_t sourcePage, uint16_t destBlock, uint16_t destPage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy the data &amp; spare area of one page to another page. The source block can be either LIVE or DIRTY, and the destination block must be LIVE; they must both have the same parity.  <a href="#aee9f19d2e0438e51d424d8aadc6f9d3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#abc7442f105f735a9ab285fa0e9de7efa">ManagedNandFlash_CopyBlock</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint16_t sourceBlock, uint16_t destBlock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies the data from a whole block to another block on a nandflash. Both blocks must be LIVE.  <a href="#abc7442f105f735a9ab285fa0e9de7efa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#ae64e080abd49cc152b1f0c02905bf4f6">ManagedNandFlash_EraseDirtyBlocks</a> (struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erases all the blocks which are currently marked as DIRTY.  <a href="#ae64e080abd49cc152b1f0c02905bf4f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a24f6c10970a1d0a8da462818e01c8b12">ManagedNandFlash_FindYoungestBlock</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint8_t status, uint16_t *block)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Looks for the youngest block having the desired status among the blocks of a managed nandflash. If a block is found, its index is stored inside the provided variable (if pointer is not 0).  <a href="#a24f6c10970a1d0a8da462818e01c8b12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#ae28662427f2a4a6fdbf214aa6c6f7b78">ManagedNandFlash_CountBlocks</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint8_t status)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Counts and returns the number of blocks having the given status in a managed nandflash.  <a href="#ae28662427f2a4a6fdbf214aa6c6f7b78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#a73de4c669da29c7dd62bd445c43267c6">ManagedNandFlash_GetDeviceSizeInBlocks</a> (const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of available blocks in a managed nandflash.  <a href="#a73de4c669da29c7dd62bd445c43267c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_managed_nand_flash_8c.html#add77af6c919fe668c3de4bff5f7c41b5">ManagedNandFlash_EraseAll</a> (struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *managed, uint8_t level)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase all blocks in the managed area of nand flash.  <a href="#add77af6c919fe668c3de4bff5f7c41b5"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The lower layer of nandflash block management, it is called by <a class="el" href="struct_mapped_nand_flash.html">MappedNandFlash</a> layer, and it will call <a class="el" href="struct_ecc_nand_flash.html">EccNandFlash</a> layer. </p>

<p>Definition in file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a9eadfc474fbb06e749b599eb1aaaa4ee"></a><!-- doxytag: member="ManagedNandFlash.c::BADBLOCK" ref="a9eadfc474fbb06e749b599eb1aaaa4ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BADBLOCK&nbsp;&nbsp;&nbsp;255</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Values returned by the CheckBlock() function </p>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00055">55</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac9178e99979ce912b28db1abe8492115"></a><!-- doxytag: member="ManagedNandFlash.c::ECC" ref="ac9178e99979ce912b28db1abe8492115" args="(managed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ECC</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">managed</td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((struct <a class="el" href="struct_ecc_nand_flash.html">EccNandFlash</a> *) managed)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Casts </p>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00050">50</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a462f5a21730474d9a8cc629c314bb912"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_AllocateBlock" ref="a462f5a21730474d9a8cc629c314bb912" args="(struct ManagedNandFlash *managed, uint16_t block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_AllocateBlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>block</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates a FREE block of a managed nandflash and marks it as LIVE. create block status information. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Block to allocate, in managed area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful; otherwise returns NandCommon_ERROR_WRONGSTATUS if the block is not FREE. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00435">435</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<a class="anchor" id="abc7442f105f735a9ab285fa0e9de7efa"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_CopyBlock" ref="abc7442f105f735a9ab285fa0e9de7efa" args="(const struct ManagedNandFlash *managed, uint16_t sourceBlock, uint16_t destBlock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_CopyBlock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>sourceBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>destBlock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copies the data from a whole block to another block on a nandflash. Both blocks must be LIVE. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sourceBlock</em>&nbsp;</td><td>Source block number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>destBlock</em>&nbsp;</td><td>Destination block number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful; NandCommon_ERROR_WRONGSTATUS if one or more page is not live; otherwise returns an NandCommon_ERROR_xxx code. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00689">689</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_abc7442f105f735a9ab285fa0e9de7efa_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_abc7442f105f735a9ab285fa0e9de7efa_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_abc7442f105f735a9ab285fa0e9de7efa_cgraph" id="_managed_nand_flash_8c_abc7442f105f735a9ab285fa0e9de7efa_cgraph">
<area shape="rect" id="node3" href="_managed_nand_flash_8c.html#aee9f19d2e0438e51d424d8aadc6f9d3c" title="Copy the data &amp; spare area of one page to another page. The source block can be either LIVE or DI..." alt="" coords="287,109,489,139"/><area shape="rect" id="node17" href="_nand_flash_model_8h.html#a3b39f12040e553a9d783aaf4c75eca70" title="Returns the number of pages in one single block of a device." alt="" coords="261,187,515,216"/><area shape="rect" id="node5" href="_ecc_nand_flash_8h.html#af0919583f231cbeda55d0910e1648ac8" title="Reads the data and/or spare of a page of a nandflash chip, and verify that the data is valid using th..." alt="" coords="577,5,751,35"/><area shape="rect" id="node7" href="_nand_flash_model_8h.html#ac88e7f34da32e612d2b15604583e44a4" title="Returns the spare area placement scheme used by a particular nandflash model." alt="" coords="813,32,1008,61"/><area shape="rect" id="node11" href="_nand_spare_scheme_8c.html#af8214b917ec1f4c9ec4120d8bfafc70e" title="Write extra bytes of information from a spare area, using the provided scheme." alt="" coords="563,109,765,139"/><area shape="rect" id="node13" href="_raw_nand_flash_8c.html#a34b540b7ba1e8499d3a71b26ad21aa59" title="Copy the data in a page of the NandFlash device to an other page on that same chip." alt="" coords="576,163,752,192"/><area shape="rect" id="node15" href="_raw_nand_flash_8c.html#a0e00f2ced8e260da07d9d7e0147e0e1a" title="Writes the data and/or the spare areas of a page of a NandFlash into the provided buffers..." alt="" coords="576,216,752,245"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aee9f19d2e0438e51d424d8aadc6f9d3c"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_CopyPage" ref="aee9f19d2e0438e51d424d8aadc6f9d3c" args="(const struct ManagedNandFlash *managed, uint16_t sourceBlock, uint16_t sourcePage, uint16_t destBlock, uint16_t destPage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_CopyPage </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>sourceBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>sourcePage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>destBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>destPage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copy the data &amp; spare area of one page to another page. The source block can be either LIVE or DIRTY, and the destination block must be LIVE; they must both have the same parity. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sourceBlock</em>&nbsp;</td><td>Source block number based on managed area. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sourcePage</em>&nbsp;</td><td>Number of source page inside the source block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>destBlock</em>&nbsp;</td><td>Destination block number based on managed area. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>destPage</em>&nbsp;</td><td>Number of destination page inside the dest block. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful; NandCommon_ERROR_WRONGSTATUS if one or more page is not live; otherwise returns an NandCommon_ERROR_xxx code. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00606">606</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_aee9f19d2e0438e51d424d8aadc6f9d3c_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_aee9f19d2e0438e51d424d8aadc6f9d3c_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_aee9f19d2e0438e51d424d8aadc6f9d3c_cgraph" id="_managed_nand_flash_8c_aee9f19d2e0438e51d424d8aadc6f9d3c_cgraph">
<area shape="rect" id="node3" href="_ecc_nand_flash_8h.html#af0919583f231cbeda55d0910e1648ac8" title="Reads the data and/or spare of a page of a nandflash chip, and verify that the data is valid using th..." alt="" coords="273,184,447,213"/><area shape="rect" id="node14" href="_nand_flash_model_8h.html#ac88e7f34da32e612d2b15604583e44a4" title="Returns the spare area placement scheme used by a particular nandflash model." alt="" coords="528,313,723,343"/><area shape="rect" id="node24" href="_nand_spare_scheme_8c.html#af8214b917ec1f4c9ec4120d8bfafc70e" title="Write extra bytes of information from a spare area, using the provided scheme." alt="" coords="259,327,461,356"/><area shape="rect" id="node26" href="_raw_nand_flash_8c.html#a34b540b7ba1e8499d3a71b26ad21aa59" title="Copy the data in a page of the NandFlash device to an other page on that same chip." alt="" coords="272,380,448,409"/><area shape="rect" id="node28" href="_raw_nand_flash_8c.html#a0e00f2ced8e260da07d9d7e0147e0e1a" title="Writes the data and/or the spare areas of a page of a NandFlash into the provided buffers..." alt="" coords="272,433,448,463"/><area shape="rect" id="node5" href="_nand_flash_model_8h.html#ac052bf600986f64087775c0c8520bf44" title="Returns the number of bits used by the data bus of a NandFlash device." alt="" coords="511,79,740,108"/><area shape="rect" id="node8" href="_nand_flash_model_8h.html#affd24a1b02eda7edee884b41039d6d18" title="Returns the size of the data area of a page in bytes. take into account the spare zones size..." alt="" coords="793,29,1023,59"/><area shape="rect" id="node11" href="_nand_flash_model_8h.html#a9243ade7ee7fa115841d4cd359d61428" title="Returns the size of the spare area of a page in bytes." alt="" coords="789,159,1027,188"/><area shape="rect" id="node17" href="_nand_spare_scheme_8c.html#a69348294ca947b8b2568ea8d4ce51351" title="Reads ECC information from a spare area using the provided scheme." alt="" coords="528,236,723,265"/><area shape="rect" id="node19" href="_raw_nand_flash_8c.html#a8eb8afee35de344a004e44c284f8b381" title="Reads the data and/or the spare areas of a page of a NandFlash into the provided buffers." alt="" coords="537,132,713,161"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae28662427f2a4a6fdbf214aa6c6f7b78"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_CountBlocks" ref="ae28662427f2a4a6fdbf214aa6c6f7b78" args="(const struct ManagedNandFlash *managed, uint8_t status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ManagedNandFlash_CountBlocks </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Counts and returns the number of blocks having the given status in a managed nandflash. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>Desired block status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of blocks. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00805">805</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<a class="anchor" id="add77af6c919fe668c3de4bff5f7c41b5"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_EraseAll" ref="add77af6c919fe668c3de4bff5f7c41b5" args="(struct ManagedNandFlash *managed, uint8_t level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_EraseAll </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Erase all blocks in the managed area of nand flash. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>Erase level. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the RawNandFlash_EraseBlock code or NandCommon_ERROR_WRONGSTATUS. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00844">844</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_add77af6c919fe668c3de4bff5f7c41b5_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_add77af6c919fe668c3de4bff5f7c41b5_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_add77af6c919fe668c3de4bff5f7c41b5_cgraph" id="_managed_nand_flash_8c_add77af6c919fe668c3de4bff5f7c41b5_cgraph">
<area shape="rect" id="node3" href="_managed_nand_flash_8c.html#a6d34d82d99b87d12772e8f8ea6af1a99" title="Erases a DIRTY block of a managed NandFlash. create block status information." alt="" coords="248,5,459,35"/><area shape="rect" id="node5" href="_raw_nand_flash_8c.html#a1e945e7ea4755f96eec868e008d977f6" title="Erases the specified block of the device, retrying several time if it fails." alt="" coords="508,32,689,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d34d82d99b87d12772e8f8ea6af1a99"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_EraseBlock" ref="a6d34d82d99b87d12772e8f8ea6af1a99" args="(struct ManagedNandFlash *managed, uint16_t block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_EraseBlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>block</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Erases a DIRTY block of a managed NandFlash. create block status information. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Block to erase, in managed area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the RawNandFlash_EraseBlock code or NandCommon_ERROR_WRONGSTATUS. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00496">496</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_a6d34d82d99b87d12772e8f8ea6af1a99_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_a6d34d82d99b87d12772e8f8ea6af1a99_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_a6d34d82d99b87d12772e8f8ea6af1a99_cgraph" id="_managed_nand_flash_8c_a6d34d82d99b87d12772e8f8ea6af1a99_cgraph">
<area shape="rect" id="node3" href="_raw_nand_flash_8c.html#a1e945e7ea4755f96eec868e008d977f6" title="Erases the specified block of the device, retrying several time if it fails." alt="" coords="265,5,447,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae64e080abd49cc152b1f0c02905bf4f6"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_EraseDirtyBlocks" ref="ae64e080abd49cc152b1f0c02905bf4f6" args="(struct ManagedNandFlash *managed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_EraseDirtyBlocks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Erases all the blocks which are currently marked as DIRTY. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful; otherwise, returns a NandCommon_ERROR code. is not live; otherwise returns an NandCommon_ERROR_xxx code. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00723">723</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_ae64e080abd49cc152b1f0c02905bf4f6_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_ae64e080abd49cc152b1f0c02905bf4f6_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_ae64e080abd49cc152b1f0c02905bf4f6_cgraph" id="_managed_nand_flash_8c_ae64e080abd49cc152b1f0c02905bf4f6_cgraph">
<area shape="rect" id="node3" href="_managed_nand_flash_8c.html#a6d34d82d99b87d12772e8f8ea6af1a99" title="Erases a DIRTY block of a managed NandFlash. create block status information." alt="" coords="299,5,509,35"/><area shape="rect" id="node5" href="_raw_nand_flash_8c.html#a1e945e7ea4755f96eec868e008d977f6" title="Erases the specified block of the device, retrying several time if it fails." alt="" coords="559,5,740,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a24f6c10970a1d0a8da462818e01c8b12"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_FindYoungestBlock" ref="a24f6c10970a1d0a8da462818e01c8b12" args="(const struct ManagedNandFlash *managed, uint8_t status, uint16_t *block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_FindYoungestBlock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&nbsp;</td>
          <td class="paramname"> <em>block</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks for the youngest block having the desired status among the blocks of a managed nandflash. If a block is found, its index is stored inside the provided variable (if pointer is not 0). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Pointer to the block number variable, based on managed area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if a block has been found; otherwise returns either status. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00754">754</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<a class="anchor" id="a73de4c669da29c7dd62bd445c43267c6"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_GetDeviceSizeInBlocks" ref="a73de4c669da29c7dd62bd445c43267c6" args="(const struct ManagedNandFlash *managed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ManagedNandFlash_GetDeviceSizeInBlocks </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of available blocks in a managed nandflash. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of blocks. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00830">830</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad9fc28b5576e0c8e711d9bb80ac458f9"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_Initialize" ref="ad9fc28b5576e0c8e711d9bb80ac458f9" args="(struct ManagedNandFlash *managed, const struct NandFlashModel *model, uint32_t commandAddress, uint32_t addressAddress, uint32_t dataAddress, const Pin pinChipEnable, const Pin pinReadyBusy, uint16_t baseBlock, uint16_t sizeInBlocks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_Initialize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="struct_nand_flash_model.html">NandFlashModel</a> *&nbsp;</td>
          <td class="paramname"> <em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>commandAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>addressAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dataAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_pin.html">Pin</a>&nbsp;</td>
          <td class="paramname"> <em>pinChipEnable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_pin.html">Pin</a>&nbsp;</td>
          <td class="paramname"> <em>pinReadyBusy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>baseBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>sizeInBlocks</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. Scans the device to retrieve or create block status information. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>model</em>&nbsp;</td><td>Pointer to the underlying nand chip model. Can be 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>commandAddress</em>&nbsp;</td><td>Address at which commands are sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addressAddress</em>&nbsp;</td><td>Address at which addresses are sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataAddress</em>&nbsp;</td><td>Address at which data is sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pinChipEnable</em>&nbsp;</td><td><a class="el" href="struct_pin.html">Pin</a> controlling the CE signal of the NandFlash. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pinReadyBusy</em>&nbsp;</td><td><a class="el" href="struct_pin.html">Pin</a> used to monitor the ready/busy signal of the Nand. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseBlock</em>&nbsp;</td><td>Base physical block address of managed area, managed 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sizeInBlocks</em>&nbsp;</td><td>Number of blocks that is managed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if the initialization is done; or returns a error code. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00202">202</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_ad9fc28b5576e0c8e711d9bb80ac458f9_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_ad9fc28b5576e0c8e711d9bb80ac458f9_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_ad9fc28b5576e0c8e711d9bb80ac458f9_cgraph" id="_managed_nand_flash_8c_ad9fc28b5576e0c8e711d9bb80ac458f9_cgraph">
<area shape="rect" id="node3" href="_ecc_nand_flash_8h.html#ae973d1ff9c15054d877f89512ce60cdc" title="Initializes an EccNandFlash instance." alt="" coords="299,5,459,35"/><area shape="rect" id="node10" href="_nand_flash_model_8h.html#a70f4d5c4976640b26f25ff1a6ba4d777" title="Returns the number of blocks in the entire device." alt="" coords="248,83,509,112"/><area shape="rect" id="node13" href="_nand_flash_model_8h.html#ac88e7f34da32e612d2b15604583e44a4" title="Returns the spare area placement scheme used by a particular nandflash model." alt="" coords="281,160,476,189"/><area shape="rect" id="node16" href="_nand_spare_scheme_8c.html#a50abca182761237c511ac82326628bc0" title="Reads the bad block marker inside a spare area buffer using the provided." alt="" coords="245,213,512,243"/><area shape="rect" id="node18" href="_nand_spare_scheme_8c.html#a198e59aa218eeb0580e1fb79611ac2b2" title="Reads extra bytes of information from a spare area, using the provided scheme." alt="" coords="277,267,480,296"/><area shape="rect" id="node20" href="_raw_nand_flash_8c.html#a8eb8afee35de344a004e44c284f8b381" title="Reads the data and/or the spare areas of a page of a NandFlash into the provided buffers." alt="" coords="291,320,467,349"/><area shape="rect" id="node5" href="_nand_flash_model_8h.html#affd24a1b02eda7edee884b41039d6d18" title="Returns the size of the data area of a page in bytes. take into account the spare zones size..." alt="" coords="572,124,801,153"/><area shape="rect" id="node8" href="_raw_nand_flash_8c.html#aafa2debe71a8cc374a074538bad48f9b" title="Initializes a RawNandFlash instance based on the given model and physical interface." alt="" coords="605,5,768,35"/><area shape="rect" id="node22" href="_nand_flash_model_8h.html#a3b39f12040e553a9d783aaf4c75eca70" title="Returns the number of pages in one single block of a device." alt="" coords="560,243,813,272"/><area shape="rect" id="node26" href="_nand_flash_model_8h.html#a9243ade7ee7fa115841d4cd359d61428" title="Returns the size of the spare area of a page in bytes." alt="" coords="568,320,805,349"/><area shape="rect" id="node29" href="_nand_flash_model_8h.html#a6989853022f404297c37066178a69ade" title="Check if the given NandFlash model uses the &quot;small blocks/pages&quot;." alt="" coords="576,397,797,427"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9c96d47e969fa9027023a695926ddb37"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_ReadPage" ref="a9c96d47e969fa9027023a695926ddb37" args="(const struct ManagedNandFlash *managed, uint16_t block, uint16_t page, void *data, void *spare)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_ReadPage </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>spare</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the data and/or the spare area of a page on a managed nandflash. If the data pointer is not 0, then the block MUST be LIVE. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Number of block to read from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>page</em>&nbsp;</td><td>Number of page to read inside given block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data area buffer, can be 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>spare</em>&nbsp;</td><td>Spare area buffer, can be 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>NandCommon_ERROR_WRONGSTATUS if the block is not LIVE and the data pointer is not null; Otherwise, returns <a class="el" href="_ecc_nand_flash_8h.html#af0919583f231cbeda55d0910e1648ac8" title="Reads the data and/or spare of a page of a nandflash chip, and verify that the data is valid using th...">EccNandFlash_ReadPage()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00539">539</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_a9c96d47e969fa9027023a695926ddb37_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_a9c96d47e969fa9027023a695926ddb37_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_a9c96d47e969fa9027023a695926ddb37_cgraph" id="_managed_nand_flash_8c_a9c96d47e969fa9027023a695926ddb37_cgraph">
<area shape="rect" id="node3" href="_ecc_nand_flash_8h.html#af0919583f231cbeda55d0910e1648ac8" title="Reads the data and/or spare of a page of a nandflash chip, and verify that the data is valid using th..." alt="" coords="260,172,433,201"/><area shape="rect" id="node5" href="_nand_flash_model_8h.html#ac052bf600986f64087775c0c8520bf44" title="Returns the number of bits used by the data bus of a NandFlash device." alt="" coords="484,29,713,59"/><area shape="rect" id="node8" href="_nand_flash_model_8h.html#affd24a1b02eda7edee884b41039d6d18" title="Returns the size of the data area of a page in bytes. take into account the spare zones size..." alt="" coords="767,108,996,137"/><area shape="rect" id="node11" href="_nand_flash_model_8h.html#a9243ade7ee7fa115841d4cd359d61428" title="Returns the size of the spare area of a page in bytes." alt="" coords="763,237,1000,267"/><area shape="rect" id="node14" href="_nand_flash_model_8h.html#ac88e7f34da32e612d2b15604583e44a4" title="Returns the spare area placement scheme used by a particular nandflash model." alt="" coords="501,211,696,240"/><area shape="rect" id="node17" href="_nand_spare_scheme_8c.html#a69348294ca947b8b2568ea8d4ce51351" title="Reads ECC information from a spare area using the provided scheme." alt="" coords="501,264,696,293"/><area shape="rect" id="node19" href="_raw_nand_flash_8c.html#a8eb8afee35de344a004e44c284f8b381" title="Reads the data and/or the spare areas of a page of a NandFlash into the provided buffers." alt="" coords="511,133,687,163"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1963a284225e8cd3f28391ff78088699"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_ReleaseBlock" ref="a1963a284225e8cd3f28391ff78088699" args="(struct ManagedNandFlash *managed, uint16_t block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_ReleaseBlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>block</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Releases a LIVE block of a nandflash and marks it as DIRTY. create block status information. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Block to release, based on managed area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful; otherwise returns NandCommon_ERROR_WRONGSTATUS if the block is not LIVE, or a RawNandFlash_WritePage error. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00466">466</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa5473e4d5b3988ecb4b9b59394d77b5c"></a><!-- doxytag: member="ManagedNandFlash.c::ManagedNandFlash_WritePage" ref="aa5473e4d5b3988ecb4b9b59394d77b5c" args="(const struct ManagedNandFlash *managed, uint16_t block, uint16_t page, void *data, void *spare)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ManagedNandFlash_WritePage </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> *&nbsp;</td>
          <td class="paramname"> <em>managed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>spare</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes the data and/or spare area of a LIVE page on a managed NandFlash. ECC for the data area and storing it in the spare. If no data buffer is provided, the ECC is read from the existing page spare. If no spare buffer is provided, the spare area is still written with the ECC information calculated on the data buffer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>managed</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_managed_nand_flash.html">ManagedNandFlash</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Number of block to read from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>page</em>&nbsp;</td><td>Number of page to read inside given block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data area buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>spare</em>&nbsp;</td><td>Spare area buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>NandCommon_ERROR_WRONGSTATUS if the page is not LIVE; otherwise, returns <a class="el" href="_ecc_nand_flash_8h.html#a45593f0cab773e79315ca54644adaa9f" title="Writes the data and/or spare area of a nandflash page, after calculating an ECC for the data area and...">EccNandFlash_WritePage()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_managed_nand_flash_8c_source.html#l00574">574</a> of file <a class="el" href="_managed_nand_flash_8c_source.html">ManagedNandFlash.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_managed_nand_flash_8c_aa5473e4d5b3988ecb4b9b59394d77b5c_cgraph.gif" border="0" usemap="#_managed_nand_flash_8c_aa5473e4d5b3988ecb4b9b59394d77b5c_cgraph" alt=""/></div>
<map name="_managed_nand_flash_8c_aa5473e4d5b3988ecb4b9b59394d77b5c_cgraph" id="_managed_nand_flash_8c_aa5473e4d5b3988ecb4b9b59394d77b5c_cgraph">
<area shape="rect" id="node3" href="_ecc_nand_flash_8h.html#a45593f0cab773e79315ca54644adaa9f" title="Writes the data and/or spare area of a nandflash page, after calculating an ECC for the data area and..." alt="" coords="260,223,433,252"/><area shape="rect" id="node5" href="_nand_flash_model_8h.html#ac052bf600986f64087775c0c8520bf44" title="Returns the number of bits used by the data bus of a NandFlash device." alt="" coords="487,29,716,59"/><area shape="rect" id="node8" href="_nand_flash_model_8h.html#affd24a1b02eda7edee884b41039d6d18" title="Returns the size of the data area of a page in bytes. take into account the spare zones size..." alt="" coords="487,107,716,136"/><area shape="rect" id="node11" href="_nand_flash_model_8h.html#a9243ade7ee7fa115841d4cd359d61428" title="Returns the size of the spare area of a page in bytes." alt="" coords="483,184,720,213"/><area shape="rect" id="node14" href="_nand_flash_model_8h.html#ac88e7f34da32e612d2b15604583e44a4" title="Returns the spare area placement scheme used by a particular nandflash model." alt="" coords="504,261,699,291"/><area shape="rect" id="node17" href="_nand_spare_scheme_8c.html#add3ca67ce79f1d312339c235cbfcf7b4" title="Writes ECC information in a spare area, using a particular scheme." alt="" coords="504,315,699,344"/><area shape="rect" id="node19" href="_raw_nand_flash_8c.html#a0e00f2ced8e260da07d9d7e0147e0e1a" title="Writes the data and/or the spare areas of a page of a NandFlash into the provided buffers..." alt="" coords="513,368,689,397"/></map>
</div>
</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
