<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SAM3S Software Package: S:/projets/EK/SAM3S-EK/sam3s_project_trunk/libraries/memories/include/NorFlashCFI.h Source File</title>
<link href="common/style.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
    <div id="body">
        <div id="title">SAM3S Software Package 2.1</div>
        <div id="banner"></div>

<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_bcc78437aa20a9e08ae4ab86f04766f4.html">libraries</a>      </li>
      <li><a class="el" href="dir_9d11e3e6f6141c04ec0c0a3a1b06ca89.html">memories</a>      </li>
      <li><a class="el" href="dir_f176cc40a90a56c70810b429c52dfb40.html">include</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>NorFlashCFI.h</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ----------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment"> *         ATMEL Microcontroller Software Support</span>
<a name="l00003"></a>00003 <span class="comment"> * ----------------------------------------------------------------------------</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (c) 2009, Atmel Corporation</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * All rights reserved.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00009"></a>00009 <span class="comment"> * modification, are permitted provided that the following conditions are met:</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * - Redistributions of source code must retain the above copyright notice,</span>
<a name="l00012"></a>00012 <span class="comment"> * this list of conditions and the disclaimer below.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Atmel&#39;s name may not be used to endorse or promote products derived from</span>
<a name="l00015"></a>00015 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * DISCLAIMER: THIS SOFTWARE IS PROVIDED BY ATMEL &quot;AS IS&quot; AND ANY EXPRESS OR</span>
<a name="l00018"></a>00018 <span class="comment"> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
<a name="l00019"></a>00019 <span class="comment"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE</span>
<a name="l00020"></a>00020 <span class="comment"> * DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00021"></a>00021 <span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,</span>
<a name="l00023"></a>00023 <span class="comment"> * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</span>
<a name="l00024"></a>00024 <span class="comment"> * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span>
<a name="l00025"></a>00025 <span class="comment"> * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,</span>
<a name="l00026"></a>00026 <span class="comment"> * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> * ----------------------------------------------------------------------------</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#ifndef _NORFLASHCFI_</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#define _NORFLASHCFI_</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00036"></a>00036 <span class="comment"> *        Definitions</span>
<a name="l00037"></a>00037 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#define CFI_MAX_ERASE_REGION    4</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00041"></a>00041 <span class="comment">/** Common flash interface query command. */</span>
<a name="l00042"></a>00042 <span class="preprocessor">#define CFI_QUERY_COMMAND     0x98</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#define CFI_QUERY_ADDRESS     0x55</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define CFI_QUERY_OFFSET      0x10</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00046"></a>00046 <span class="comment">/** Vendor command set control interface ID code . */</span>
<a name="l00047"></a>00047 <span class="preprocessor">#define CMD_SET_NULL          0x0000</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_INTEL_EXT     0x0001</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_AMD           0x0002</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_INTEL         0x0003</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_AMD_EXT       0x0004</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_MISUBISHI     0x0100</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_MISUBISHI_EXT 0x0101</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#define CMD_SET_SST           0x0102</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00056"></a>00056 <span class="comment">/** Indicates the maximum region for norflash device. */</span>
<a name="l00057"></a>00057 <span class="preprocessor">#define NORFLASH_MAXNUMRIGONS 4</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="comment">/** Indicates the NorFlash uses an 8-bit address bus. */</span>
<a name="l00059"></a>00059 <span class="preprocessor">#define FLASH_CHIP_WIDTH_8BITS  0x01</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="comment">/** Indicates the NorFlash uses an 16-bit address bus. */</span>
<a name="l00061"></a>00061 <span class="preprocessor">#define FLASH_CHIP_WIDTH_16BITS 0x02</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="comment">/** Indicates the NorFlash uses an 32-bit address bus. */</span>
<a name="l00063"></a>00063 <span class="preprocessor">#define FLASH_CHIP_WIDTH_32BITS 0x04</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="comment">/** Indicates the NorFlash uses an 64-bit address bus. */</span>
<a name="l00065"></a>00065 <span class="preprocessor">#define FLASH_CHIP_WIDTH_64BITS 0x08</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00068"></a>00068 <span class="comment"> *        Types</span>
<a name="l00069"></a>00069 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00070"></a>00070 <span class="comment"></span>
<a name="l00071"></a>00071 <span class="comment">/** \brief Describes a Norflash CFI query system interface information. */</span>
<a name="l00072"></a>00072 <span class="preprocessor">#ifdef __ICCARM__          </span><span class="comment">/* IAR */</span>
<a name="l00073"></a>00073 <span class="preprocessor">#pragma pack(1)            </span><span class="comment">/* IAR */</span>
<a name="l00074"></a>00074 <span class="preprocessor">#define __attribute__(...) </span><span class="comment">/* IAR */</span>
<a name="l00075"></a>00075 <span class="preprocessor">#endif                     </span><span class="comment">/* IAR */</span>
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="struct___nor_flash_cfi_query_info.html">00077</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___nor_flash_cfi_query_info.html" title="Describes a Norflash CFI query system interface information.">_NorFlashCfiQueryInfo</a>
<a name="l00078"></a>00078 {<span class="comment"></span>
<a name="l00079"></a>00079 <span class="comment">    /** Query Unique String &quot;QRY&quot;. */</span>
<a name="l00080"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a7780e2a09e39ca2a14242676b37649ed">00080</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a7780e2a09e39ca2a14242676b37649ed">queryUniqueString</a>[3];<span class="comment"></span>
<a name="l00081"></a>00081 <span class="comment">    /** Primary vendor command set and control interface ID . */</span>
<a name="l00082"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a5fc3e012dab95a1bd866948d51ad3948">00082</a>     uint16_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a5fc3e012dab95a1bd866948d51ad3948">primaryCode</a>;<span class="comment"></span>
<a name="l00083"></a>00083 <span class="comment">    /** Address for primary extended query table. */</span>
<a name="l00084"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#af9e673ce6f1cf89388b06ae74eb43ef8">00084</a>     uint16_t <a class="code" href="struct___nor_flash_cfi_query_info.html#af9e673ce6f1cf89388b06ae74eb43ef8">primaryAddr</a>;<span class="comment"></span>
<a name="l00085"></a>00085 <span class="comment">    /** Alternate vendor command set and control interface ID . */</span>
<a name="l00086"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a36166e9c6ec58d59d99fed1002da6192">00086</a>     uint16_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a36166e9c6ec58d59d99fed1002da6192">alternateCode</a>;<span class="comment"></span>
<a name="l00087"></a>00087 <span class="comment">    /** Address for alternate extended query table. */</span>
<a name="l00088"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a85750ec55f29a84f910e9cef1952da06">00088</a>     uint16_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a85750ec55f29a84f910e9cef1952da06">alternateAddr</a>;<span class="comment"></span>
<a name="l00089"></a>00089 <span class="comment">    /** Vcc logic supply minimum write/erase voltage. */</span>
<a name="l00090"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a225dcea9612dd22828ba961ce15e17fa">00090</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a225dcea9612dd22828ba961ce15e17fa">minVcc</a>;<span class="comment"></span>
<a name="l00091"></a>00091 <span class="comment">    /** Vcc logic supply maximum write/erase voltage. */</span>
<a name="l00092"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#ac68ca8ebca3170f0b0353dfa64cf29d4">00092</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#ac68ca8ebca3170f0b0353dfa64cf29d4">maxVcc</a>;<span class="comment"></span>
<a name="l00093"></a>00093 <span class="comment">    /** Vpp logic supply minimum write/erase voltage. */</span>
<a name="l00094"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#aa3b4634a9dc2e1951fbea4f1badb321b">00094</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#aa3b4634a9dc2e1951fbea4f1badb321b">minVpp</a>;<span class="comment"></span>
<a name="l00095"></a>00095 <span class="comment">    /** Vpp logic supply maximum write/erase voltage. */</span>
<a name="l00096"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a5cbbfc3413d79c8ca7f0a324f1a57305">00096</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a5cbbfc3413d79c8ca7f0a324f1a57305">maxVpp</a>;<span class="comment"></span>
<a name="l00097"></a>00097 <span class="comment">    /** Timeout per single write (2&lt;&lt;n) in microsecond. */</span>
<a name="l00098"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#aac456398b476c4c9d37992dbb1557013">00098</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#aac456398b476c4c9d37992dbb1557013">minTimeOutWrite</a>;<span class="comment"></span>
<a name="l00099"></a>00099 <span class="comment">    /** Timeout for minimum-size buffer write (2&lt;&lt;n) in microsecond. */</span>
<a name="l00100"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a82410dea7f08a974c694db1e6d3cf406">00100</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a82410dea7f08a974c694db1e6d3cf406">minTimeOutBuffer</a>;<span class="comment"></span>
<a name="l00101"></a>00101 <span class="comment">    /** Timeout for block erase (2&lt;&lt;n) in microsecond. */</span>
<a name="l00102"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a2d700a36174b54d21a12ee7cdb090baf">00102</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a2d700a36174b54d21a12ee7cdb090baf">minTimeOutBlockErase</a>;<span class="comment"></span>
<a name="l00103"></a>00103 <span class="comment">    /** Timeout for chip erase (2&lt;&lt;n) in microsecond. */</span>
<a name="l00104"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a31caf67f56210ff2ffda5f56616b9b54">00104</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a31caf67f56210ff2ffda5f56616b9b54">minTimeOutChipErase</a>;<span class="comment"></span>
<a name="l00105"></a>00105 <span class="comment">    /** Maximum timeout per write (2&lt;&lt;n) in microsecond. */</span>
<a name="l00106"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#aa2df0ab79613758729549b16723199b4">00106</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#aa2df0ab79613758729549b16723199b4">maxTimeOutWrite</a>;<span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">    /** Maximum timeout for buffer write (2&lt;&lt;n) in microsecond. */</span>
<a name="l00108"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#af7d2759a70814e1b8c72434b6740a2e1">00108</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#af7d2759a70814e1b8c72434b6740a2e1">maxTimeOutBuffer</a>;<span class="comment"></span>
<a name="l00109"></a>00109 <span class="comment">    /** Maximum timeout for block erase (2&lt;&lt;n) in microsecond. */</span>
<a name="l00110"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a6992a0d093a0d39999b1cd3fa68d8276">00110</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a6992a0d093a0d39999b1cd3fa68d8276">maxTimeOutBlockErase</a>;<span class="comment"></span>
<a name="l00111"></a>00111 <span class="comment">    /** Maximum timeout for chip erase (2&lt;&lt;n) in microsecond. */</span>
<a name="l00112"></a><a class="code" href="struct___nor_flash_cfi_query_info.html#a6e8f2bf33df4ca3a313c8239e1b259d3">00112</a>     uint8_t <a class="code" href="struct___nor_flash_cfi_query_info.html#a6e8f2bf33df4ca3a313c8239e1b259d3">maxTimeOutChipErase</a>;
<a name="l00113"></a>00113 }  <a class="code" href="crccu_2main_8c.html#a9f6ee749d278fbad2139258ca8a115dc">__attribute__</a> ((packed)) NorFlashCfiQueryInfo;
<a name="l00114"></a>00114 <span class="comment"></span>
<a name="l00115"></a>00115 <span class="comment">/** \brief Describes a Norflash CFI Erase block Region information. */</span>
<a name="l00116"></a><a class="code" href="struct___erase_region_info.html">00116</a> typedef struct <a class="code" href="struct___erase_region_info.html" title="Describes a Norflash CFI Erase block Region information.">_EraseRegionInfo</a>
<a name="l00117"></a>00117 {<span class="comment"></span>
<a name="l00118"></a>00118 <span class="comment">    /** Number of erase blocks within the region. */</span>
<a name="l00119"></a><a class="code" href="struct___erase_region_info.html#a2c3d121828122067ca12561096e92a33">00119</a>     uint16_t Y;<span class="comment"></span>
<a name="l00120"></a>00120 <span class="comment">    /** Size within the region. */</span>
<a name="l00121"></a><a class="code" href="struct___erase_region_info.html#aa03aaa23f067ede916590ff8eba1c92f">00121</a>     uint16_t Z;
<a name="l00122"></a>00122 } <a class="code" href="crccu_2main_8c.html#a9f6ee749d278fbad2139258ca8a115dc">__attribute__</a> ((packed)) EraseRegionInfo;
<a name="l00123"></a>00123 <span class="comment"></span>
<a name="l00124"></a>00124 <span class="comment">/**\brief Describes a Norflash CFI critical details of device geometry. */</span>
<a name="l00125"></a><a class="code" href="struct___nor_flash_cfi_device_geometry.html">00125</a> typedef struct <a class="code" href="struct___nor_flash_cfi_device_geometry.html" title="Describes a Norflash CFI critical details of device geometry.">_NorFlashCfiDeviceGeometry</a>
<a name="l00126"></a>00126 {<span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">    /** Size of Device (2&lt;&lt;n) in number of bytes. */</span>
<a name="l00128"></a><a class="code" href="struct___nor_flash_cfi_device_geometry.html#a17869a8b9ee2fa46b267c1a79ded9555">00128</a>     uint8_t deviceSize;<span class="comment"></span>
<a name="l00129"></a>00129 <span class="comment">    /** Flash device interface description. */</span>
<a name="l00130"></a><a class="code" href="struct___nor_flash_cfi_device_geometry.html#ae1fc868fd770d8ae897afb26a26290e3">00130</a>     uint16_t deviceInterface;<span class="comment"></span>
<a name="l00131"></a>00131 <span class="comment">    /** Maximum number of bytes in multi-byte write (2&lt;&lt;n). */</span>
<a name="l00132"></a><a class="code" href="struct___nor_flash_cfi_device_geometry.html#a5375ce5f9dbce2e71c047110f883eaf8">00132</a>     uint16_t numMultiWrite;<span class="comment"></span>
<a name="l00133"></a>00133 <span class="comment">    /** Number of erase block regions. */</span>
<a name="l00134"></a><a class="code" href="struct___nor_flash_cfi_device_geometry.html#aed6514c502e30dd8e2249dc2efe25411">00134</a>     uint8_t numEraseRegion;<span class="comment"></span>
<a name="l00135"></a>00135 <span class="comment">    /** Erase block Region information. */</span>
<a name="l00136"></a><a class="code" href="struct___nor_flash_cfi_device_geometry.html#a8becaa6f71ba5d6364a38be51ae5c346">00136</a>     EraseRegionInfo eraseRegionInfo[16];
<a name="l00137"></a>00137 } <a class="code" href="crccu_2main_8c.html#a9f6ee749d278fbad2139258ca8a115dc">__attribute__</a> ((packed)) NorFlashCfiDeviceGeometry;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 <span class="preprocessor">#ifdef __ICCARM__          </span><span class="comment">/* IAR */</span>
<a name="l00140"></a>00140 <span class="preprocessor">#pragma pack()             </span><span class="comment">/* IAR */</span>
<a name="l00141"></a>00141 <span class="preprocessor">#endif                     </span><span class="comment">/* IAR */</span>
<a name="l00142"></a>00142 <span class="comment"></span>
<a name="l00143"></a>00143 <span class="comment">/** \brief Describes a Norflash Common Flash Interface information. */</span>
<a name="l00144"></a><a class="code" href="struct_nor_flash_c_f_i.html">00144</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_NorFlashCFI
<a name="l00145"></a>00145 {<span class="comment"></span>
<a name="l00146"></a>00146 <span class="comment">    /**CFI query system interface information. */</span>
<a name="l00147"></a><a class="code" href="struct_nor_flash_c_f_i.html#aebd919963264d696614b0deb84c4fd4c">00147</a>     NorFlashCfiQueryInfo norFlashCfiQueryInfo;<span class="comment"></span>
<a name="l00148"></a>00148 <span class="comment">    /** CFI critical details of device geometry. */</span>
<a name="l00149"></a><a class="code" href="struct_nor_flash_c_f_i.html#a6816647989b147e1ea175ac05faa6ded">00149</a>     NorFlashCfiDeviceGeometry norFlashCfiDeviceGeometry;
<a name="l00150"></a>00150 } <a class="code" href="struct_nor_flash_c_f_i.html" title="Describes a Norflash Common Flash Interface information.">NorFlashCFI</a> ;
<a name="l00151"></a>00151 <span class="comment"></span>
<a name="l00152"></a>00152 <span class="comment">/** \brief Describes a particular model of NandFlash device. */</span>
<a name="l00153"></a><a class="code" href="struct_nor_flash_info.html">00153</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_NorFlashInfo
<a name="l00154"></a>00154 {<span class="comment"></span>
<a name="l00155"></a>00155 <span class="comment">    /** Base address. */</span>
<a name="l00156"></a><a class="code" href="struct_nor_flash_info.html#a4055fd2534ea20bef3ac6e5ef5a9f537">00156</a>     uint32_t baseAddress;<span class="comment"></span>
<a name="l00157"></a>00157 <span class="comment">    /** Address bus using giving by CFI detection. */</span><span class="comment"></span>
<a name="l00158"></a>00158 <span class="comment">    /** It can not retrieve info directly from  the NorFlashCFI, it depend on hardware connection. */</span>
<a name="l00159"></a><a class="code" href="struct_nor_flash_info.html#a79e557a8fb8a1389b9cd2ed9c671cd8d">00159</a>     uint8_t deviceChipWidth;<span class="comment"></span>
<a name="l00160"></a>00160 <span class="comment">    /** Indicate the decive CFI is compatible */</span>
<a name="l00161"></a><a class="code" href="struct_nor_flash_info.html#a78af9a9446649f01b9a9a111ae1d73bb">00161</a>     uint8_t cfiCompatible;<span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">    /** Norflash Common Flash Interface information. */</span>
<a name="l00163"></a><a class="code" href="struct_nor_flash_info.html#a99180720324bed3c47c7f45c9c829779">00163</a>     <a class="code" href="struct_nor_flash_c_f_i.html" title="Describes a Norflash Common Flash Interface information.">NorFlashCFI</a>  cfiDescription;
<a name="l00164"></a>00164 } <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> ;
<a name="l00165"></a>00165 <span class="comment"></span>
<a name="l00166"></a>00166 <span class="comment">///** Reset or exit CFI query mode function. */</span>
<a name="l00167"></a>00167 <span class="comment"></span><span class="comment">//typedef void (*fReset) ( NorFlashInfo *, uint32_t ) ;</span><span class="comment"></span>
<a name="l00168"></a>00168 <span class="comment">///** Write buffer to pNorFlash function. */</span>
<a name="l00169"></a>00169 <span class="comment"></span><span class="comment">//typedef uint8_t (*fWriteData)( NorFlashInfo *, uint32_t , uint8_t *, uint32_t ) ;</span><span class="comment"></span>
<a name="l00170"></a>00170 <span class="comment">///** Read manufactory function. */</span>
<a name="l00171"></a>00171 <span class="comment"></span><span class="comment">//typedef uint32_t (*fReadManufactoryID)( NorFlashInfo * ) ;</span><span class="comment"></span>
<a name="l00172"></a>00172 <span class="comment">///** Read device ID code function. */</span>
<a name="l00173"></a>00173 <span class="comment"></span><span class="comment">//typedef uint32_t (*fReadDeviceID)( NorFlashInfo * ) ;</span><span class="comment"></span>
<a name="l00174"></a>00174 <span class="comment">///** Full erase chip function. */</span>
<a name="l00175"></a>00175 <span class="comment"></span><span class="comment">//typedef uint8_t (*fEraseChip) ( NorFlashInfo * ) ;</span><span class="comment"></span>
<a name="l00176"></a>00176 <span class="comment">///** Erase single sector function. */</span>
<a name="l00177"></a>00177 <span class="comment"></span><span class="comment">//typedef uint8_t (*fEraseSector)( NorFlashInfo *, uint32_t ) ;</span>
<a name="l00178"></a>00178 <span class="comment">//</span>
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="struct_nor_flash_operations.html">00180</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_NorFlashOperations
<a name="l00181"></a>00181 {<span class="comment"></span>
<a name="l00182"></a>00182 <span class="comment">    /** Reset or exit CFI query mode function. */</span>
<a name="l00183"></a><a class="code" href="struct_nor_flash_operations.html#a1f1ffae216c32d0db3f8d57a1f4be788">00183</a>     void (*_fReset)( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t address ) ;<span class="comment"></span>
<a name="l00184"></a>00184 <span class="comment">    /** Write buffer to norflash function. */</span>
<a name="l00185"></a><a class="code" href="struct_nor_flash_operations.html#aad5dca40bf01e3c1c070c70d61deb4a5">00185</a>     uint8_t (*_fWriteData)( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t address, uint8_t *buffer, uint32_t size ) ;<span class="comment"></span>
<a name="l00186"></a>00186 <span class="comment">    /** Read manufactory function. */</span>
<a name="l00187"></a><a class="code" href="struct_nor_flash_operations.html#a8d17f93d69ac4b6011142d34e74b48f6">00187</a>     uint32_t  (*_fReadManufactoryID)( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo ) ;<span class="comment"></span>
<a name="l00188"></a>00188 <span class="comment">    /** Read device ID code function. */</span>
<a name="l00189"></a><a class="code" href="struct_nor_flash_operations.html#a4b47c1e994f4a3c476d0c75adbf6188e">00189</a>     uint32_t (*_fReadDeviceID)( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo ) ;<span class="comment"></span>
<a name="l00190"></a>00190 <span class="comment">    /** Full erase chip function. */</span>
<a name="l00191"></a><a class="code" href="struct_nor_flash_operations.html#a505bdd172287847f3861bb33df90caee">00191</a>     uint8_t (*_fEraseChip) ( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo ) ;<span class="comment"></span>
<a name="l00192"></a>00192 <span class="comment">    /** Erase single sector function. */</span>
<a name="l00193"></a><a class="code" href="struct_nor_flash_operations.html#a221e49a316ddc76bdd89a0e73833d47d">00193</a>     uint8_t (*_fEraseSector)( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t address ) ;
<a name="l00194"></a>00194 } <a class="code" href="struct_nor_flash_operations.html">NorFlashOperations</a> ;
<a name="l00195"></a>00195 <span class="comment"></span>
<a name="l00196"></a>00196 <span class="comment">/** \brief Describes a particular model of NandFlash device. */</span>
<a name="l00197"></a><a class="code" href="struct_nor_flash.html">00197</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_NorFlash
<a name="l00198"></a>00198 {
<a name="l00199"></a>00199    <span class="keyword">const</span> <a class="code" href="struct_nor_flash_operations.html">NorFlashOperations</a> *pOperations;
<a name="l00200"></a>00200    <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> norFlashInfo;
<a name="l00201"></a>00201 } <a class="code" href="struct_nor_flash.html" title="Describes a particular model of NandFlash device.">NorFlash</a> ;
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00204"></a>00204 <span class="comment"> *        Exported functions</span>
<a name="l00205"></a>00205 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="keyword">extern</span> uint8_t NorFlash_CFI_Detect( <a class="code" href="struct_nor_flash.html" title="Describes a particular model of NandFlash device.">NorFlash</a> *norFlash, uint8_t hardwareBusWidth ) ;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="keyword">extern</span> uint32_t NorFlash_GetDeviceNumOfBlocks( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keyword">extern</span> uint32_t NorFlash_GetDeviceMinBlockSize(<a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 <span class="keyword">extern</span> uint32_t NorFlash_GetDeviceMaxBlockSize( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo ) ;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="keyword">extern</span> uint32_t NorFlash_GetDeviceBlockSize( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t sector ) ;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 <span class="keyword">extern</span> uint16_t NorFlash_GetDeviceSectorInRegion( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t memoryOffset ) ;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="keyword">extern</span> uint32_t NorFlash_GetDeviceSectorAddress( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t sector ) ;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 <span class="keyword">extern</span> uint32_t NorFlash_GetByteAddress( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t offset ) ;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="keyword">extern</span> uint32_t NorFlash_GetByteAddressInChip( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t offset ) ;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="keyword">extern</span> uint32_t NorFlash_GetAddressInChip( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo, uint32_t offset ) ;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="keyword">extern</span> uint8_t NorFlash_GetDataBusWidth( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo ) ;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="keyword">extern</span> uint32_t NorFlash_GetDeviceSizeInBytes( <a class="code" href="struct_nor_flash_info.html" title="Describes a particular model of NandFlash device.">NorFlashInfo</a> *pNorFlashInfo ) ;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="preprocessor">#endif </span><span class="comment">/* #ifndef _NORFLASHCFI_ */</span>
<a name="l00232"></a>00232 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
